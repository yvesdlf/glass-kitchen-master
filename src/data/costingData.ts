// Ingredient costing data matching Excel format
// Formula: Wastage% = Waste Weight / Initial Weight
// True Cost = Unit Cost / (1 - Wastage%)

export interface IngredientCosting {
  itemCategoryCode: string;
  category: string;
  ingredientName: string;
  description: string;
  unitCost: number;
  baseUnitOfMeasure: string;
  conditioning: number;
  initialWeight: number;
  wasteWeight: number;
  yield: number;
  wastagePercent: number;
  trueCost: number;
}

// Calculate wastage and true cost based on initial/waste weights
export const calculateWastage = (initialWeight: number, wasteWeight: number): number => {
  if (initialWeight <= 0) return 0;
  return (wasteWeight / initialWeight) * 100;
};

export const calculateTrueCost = (unitCost: number, wastagePercent: number): number => {
  if (wastagePercent >= 100) return unitCost;
  return unitCost / (1 - wastagePercent / 100);
};

// Ingredient master data from Excel
export const ingredientCostings: IngredientCosting[] = [
  {
    itemCategoryCode: "PR001",
    category: "BEEF",
    ingredientName: "Beef Tenderloin",
    description: "3/4 kg Black Angus",
    unitCost: 30.00,
    baseUnitOfMeasure: "KG",
    conditioning: 1000,
    initialWeight: 6,
    wasteWeight: 1,
    yield: 5,
    wastagePercent: 16.7,
    trueCost: 35.00,
  },
  {
    itemCategoryCode: "PR002",
    category: "BREAD & OTHER",
    ingredientName: "Brioche",
    description: "30g Buns",
    unitCost: 2.00,
    baseUnitOfMeasure: "EACH",
    conditioning: 30,
    initialWeight: 24,
    wasteWeight: 0,
    yield: 24,
    wastagePercent: 0.0,
    trueCost: 2.00,
  },
  {
    itemCategoryCode: "PR003",
    category: "CAVIAR",
    ingredientName: "Beluga 125g",
    description: "125g Kaviari",
    unitCost: 125.00,
    baseUnitOfMeasure: "G",
    conditioning: 1000,
    initialWeight: 1,
    wasteWeight: 0,
    yield: 1,
    wastagePercent: 0.0,
    trueCost: 125.00,
  },
  {
    itemCategoryCode: "PR004",
    category: "CHICKEN",
    ingredientName: "Corn fed Baby Chicken",
    description: "350g whole",
    unitCost: 12.00,
    baseUnitOfMeasure: "KG",
    conditioning: 1000,
    initialWeight: 3,
    wasteWeight: 2,
    yield: 1,
    wastagePercent: 66.7,
    trueCost: 20.00,
  },
  {
    itemCategoryCode: "PR005",
    category: "CRESS",
    ingredientName: "Coriander Cress",
    description: "20g Punt",
    unitCost: 2.00,
    baseUnitOfMeasure: "EACH",
    conditioning: 1,
    initialWeight: 4,
    wasteWeight: 2,
    yield: 2,
    wastagePercent: 50.0,
    trueCost: 3.00,
  },
  {
    itemCategoryCode: "PR006",
    category: "DAIRY & EGGS",
    ingredientName: "Whole eggs",
    description: "36g each",
    unitCost: 1.00,
    baseUnitOfMeasure: "EACH",
    conditioning: 1,
    initialWeight: 56,
    wasteWeight: 1,
    yield: 55,
    wastagePercent: 1.8,
    trueCost: 1.02,
  },
  {
    itemCategoryCode: "PR007",
    category: "DRY",
    ingredientName: "Salt",
    description: "500g Fine sea salt",
    unitCost: 2.10,
    baseUnitOfMeasure: "KG",
    conditioning: 1000,
    initialWeight: 2,
    wasteWeight: 0.1,
    yield: 1.9,
    wastagePercent: 5.0,
    trueCost: 2.21,
  },
  {
    itemCategoryCode: "PR008",
    category: "DUCK",
    ingredientName: "Duck Breast",
    description: "350g Magret",
    unitCost: 15.00,
    baseUnitOfMeasure: "KG",
    conditioning: 1000,
    initialWeight: 4,
    wasteWeight: 1,
    yield: 3,
    wastagePercent: 25.0,
    trueCost: 18.75,
  },
  {
    itemCategoryCode: "PR009",
    category: "FISH",
    ingredientName: "Snapper",
    description: "1.2kg Whole fish",
    unitCost: 24.00,
    baseUnitOfMeasure: "KG",
    conditioning: 1000,
    initialWeight: 6,
    wasteWeight: 1,
    yield: 5,
    wastagePercent: 16.7,
    trueCost: 28.00,
  },
  {
    itemCategoryCode: "PR010",
    category: "FRUIT",
    ingredientName: "Granny Smith",
    description: "1kg Bags",
    unitCost: 2.20,
    baseUnitOfMeasure: "KG",
    conditioning: 1000,
    initialWeight: 7,
    wasteWeight: 2,
    yield: 5,
    wastagePercent: 28.6,
    trueCost: 2.83,
  },
  {
    itemCategoryCode: "PR011",
    category: "HERBS",
    ingredientName: "Flat Parsley",
    description: "1kg Bags",
    unitCost: 1.10,
    baseUnitOfMeasure: "KG",
    conditioning: 1000,
    initialWeight: 3,
    wasteWeight: 1,
    yield: 2,
    wastagePercent: 33.3,
    trueCost: 1.47,
  },
  {
    itemCategoryCode: "PR012",
    category: "JAPANESE",
    ingredientName: "Soya Sauce GF",
    description: "18ltr Kikoman Gluten Free",
    unitCost: 130.00,
    baseUnitOfMeasure: "LT",
    conditioning: 18000,
    initialWeight: 18,
    wasteWeight: 0.5,
    yield: 17.5,
    wastagePercent: 2.8,
    trueCost: 133.61,
  },
  {
    itemCategoryCode: "PR013",
    category: "LAMB",
    ingredientName: "Lamb Rack",
    description: "7 Bone French Thomas foods",
    unitCost: 27.00,
    baseUnitOfMeasure: "KG",
    conditioning: 1000,
    initialWeight: 2,
    wasteWeight: 1,
    yield: 1,
    wastagePercent: 50.0,
    trueCost: 40.50,
  },
  {
    itemCategoryCode: "PR014",
    category: "MOLLUSC",
    ingredientName: "Baby Squid",
    description: "U20 Cleaned",
    unitCost: 12.00,
    baseUnitOfMeasure: "KG",
    conditioning: 1000,
    initialWeight: 2,
    wasteWeight: 0.2,
    yield: 1.8,
    wastagePercent: 10.0,
    trueCost: 13.20,
  },
  {
    itemCategoryCode: "PR015",
    category: "PORK",
    ingredientName: "Pork Ribs",
    description: "2kg Racks",
    unitCost: 20.00,
    baseUnitOfMeasure: "KG",
    conditioning: 1000,
    initialWeight: 5,
    wasteWeight: 0.4,
    yield: 4.6,
    wastagePercent: 8.0,
    trueCost: 21.60,
  },
  {
    itemCategoryCode: "PR016",
    category: "SHELLFISH",
    ingredientName: "Prawns U12",
    description: "2kg Blocks",
    unitCost: 28.00,
    baseUnitOfMeasure: "KG",
    conditioning: 1000,
    initialWeight: 2,
    wasteWeight: 1,
    yield: 1,
    wastagePercent: 50.0,
    trueCost: 42.00,
  },
  {
    itemCategoryCode: "PR017",
    category: "SPICES",
    ingredientName: "Whole Black pepper",
    description: "1kg Bags",
    unitCost: 5.00,
    baseUnitOfMeasure: "KG",
    conditioning: 1000,
    initialWeight: 3,
    wasteWeight: 2,
    yield: 1,
    wastagePercent: 66.7,
    trueCost: 8.33,
  },
  {
    itemCategoryCode: "PR018",
    category: "TRUFFLE",
    ingredientName: "Summer Black Truffle",
    description: "1kg Bags",
    unitCost: 70.00,
    baseUnitOfMeasure: "G",
    conditioning: 1000,
    initialWeight: 4,
    wasteWeight: 3,
    yield: 1,
    wastagePercent: 75.0,
    trueCost: 122.50,
  },
  {
    itemCategoryCode: "PR019",
    category: "VEGETABLE",
    ingredientName: "White Onion",
    description: "1kg Bags",
    unitCost: 2.00,
    baseUnitOfMeasure: "KG",
    conditioning: 1000,
    initialWeight: 2,
    wasteWeight: 0.1,
    yield: 1.9,
    wastagePercent: 5.0,
    trueCost: 2.10,
  },
  {
    itemCategoryCode: "PR020",
    category: "OIL / VINEGAR",
    ingredientName: "Sunflower Oil",
    description: "1.5Lt bot",
    unitCost: 2.45,
    baseUnitOfMeasure: "LT",
    conditioning: 1000,
    initialWeight: 4,
    wasteWeight: 0.4,
    yield: 3.6,
    wastagePercent: 10.0,
    trueCost: 2.70,
  },
];

// Get summary statistics
export const getCostingSummary = () => {
  const totalIngredients = ingredientCostings.length;
  const avgWastage = ingredientCostings.reduce((sum, ing) => sum + ing.wastagePercent, 0) / totalIngredients;
  const highWastageItems = ingredientCostings.filter((ing) => ing.wastagePercent >= 40).length;
  const totalCategories = new Set(ingredientCostings.map((ing) => ing.category)).size;

  return {
    totalIngredients,
    avgWastage,
    highWastageItems,
    totalCategories,
  };
};
